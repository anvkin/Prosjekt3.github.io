<!DOCTYPE html>
<html lang="no">
    <head>
        <meta charset="UTF-8">
        <title>AnveChat</title>
        <link rel="stylesheet" type="text/css" href="prosjekt3.css">
    </head>
    <body>
        <form id="skjema">
            <input type="text" id="inpSendar" required
            placeholder="Kven er du?">
            <input type="text" id="inpMeaning" required
            placeholder="Kva seier du?">
            <button type="submit"
            class="button">OK</button>
        </form>
        <script                            src="https://www.gstatic.com/firebasejs/6.0.4/firebase-app.js"></script>
        <script>
            var firebaseConfig = {
            apiKey: "AIzaSyAdauJ-       mG_yeqZWIggSckDLHu8S_wEaIZY",
            authDomain: "prosjekt-3.firebaseapp.com",
            databaseURL: "https://prosjekt-3.firebaseio.com",
            projectId: "prosjekt-3",
            storageBucket: "prosjekt-3.appspot.com",
            messagingSenderId: "1015233995729",
            appId: "1:1015233995729:web:76c756706188a891"
        };
            firebase.initializeApp(firebaseConfig);
        </script>
        <script>
            let database=firebase.database();
            let meldingar=database.ref("meldingar");
            let skjema=document.getElementById("skjema");
            let inpSendar=document.getElementById("inpSendar");
            let inpMeining=document.getElementById("inpMeining");
            let txtMeldingar=document.getElementById("txtMeldingar");
            function visMelding(snapshot){
                let melding=snapshot.val();
                let meldingTekst=`<p>
                    <b>${melding.sendar}:</b>
                    <i>${melding.tekst}:</i>
                </p>`;
                txtMeldingar.innerHTML=txtMeldingar.innerHTML+meldingTekst;
            }
            function regNymelding(evt){
                evt.preventDefault();
                var nyMelding{
                    sendar:inpSendar.value,
                    tekst:inpMeining.value
                };
                meldingar.push(nyMelding)
                inpMeining.value="";
            }
            meldingar.on("child_added", visMelding);
            skjema.onsubmit=regNymelding;
        </script>
    </body>
</html>